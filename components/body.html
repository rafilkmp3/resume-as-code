</head>
<body>
</head>
<body>
    <!-- Skip Navigation Link for Keyboard Users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Parallax Background -->
    <div class="parallax-bg" id="parallaxBg"></div>

    <!-- Theme toggle moved to top-right utility position -->
    <div class="theme-utility">
        <button class="theme-toggle" id="darkToggle" title="Toggle Dark/Light Mode" aria-label="Toggle between dark and light theme">
            <svg class="sun-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"></circle>
                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
            </svg>
            <svg class="moon-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>
    </div>


    <div class="container" id="main-content">
        <!-- Minimal Professional Header - Identity Focus Only -->
        <header class="header">
            {{#if profileImageOptimization}}
            <picture class="profile-photo-container">
                <!-- Responsive JPEG images for all browsers -->
                <source
                    srcset="{{profileImageOptimization.primaryJPEG}}"
                    type="image/jpeg"
                    media="(min-width: 768px)">
                <source
                    srcset="{{profileImageOptimization.primaryJPEG}}"
                    type="image/jpeg"
                    media="(max-width: 767px)">

                <!-- Default fallback image -->
                <img
                    src="{{profileImageOptimization.primaryJPEG}}"
                    alt="{{basics.name}}"
                    class="profile-photo"
                    loading="eager"
                    decoding="async"
                    width="150"
                    height="150">
            </picture>
            {{else}}
            {{#if basics.image}}
            <img src="{{basics.image}}" alt="{{basics.name}}" class="profile-photo">
            {{/if}}
            {{/if}}
            <div class="header-content">
                <h1>{{basics.name}}</h1>
                <div class="subtitle">{{basics.label}}</div>

                <!-- Optional location for context -->
                <div class="header-location">
                    <span class="location-icon">🇧🇷</span>
                    <span class="location-text">{{basics.location.city}}, {{basics.location.region}}</span>
                </div>

                <!-- Direct email CTA - expert consensus implementation -->
                <div class="header-cta">
                    <a href="mailto:{{basics.email}}" class="contact-cta-link" aria-label="Send email to Rafael">
                        <span>Email Me</span>
                    </a>
                </div>
            </div>
        </header>

        <div class="main-content" id="main-content">
            <div class="left-column">
                <section class="section fade-in-section">
                    <h2>Profile</h2>
                    <div class="profile-summary">{{basics.summary}}</div>

                    <div class="availability-status">
                        <div class="status-indicator">
                            <span class="status-icon">🟢</span>
                            <span class="status-text">Open to Work</span>
                        </div>
                        <div class="work-types">
                            <span class="work-type">Full-time</span>
                            <span class="type-separator">•</span>
                            <span class="work-type">Contract</span>
                        </div>
                    </div>
                </section>

                <!-- Dedicated Contact Section - All contact info moved from header -->
                <section class="section fade-in-section" id="contact">
                    <h2>Contact & Connect</h2>

                    <!-- Primary contact methods -->
                    <div class="contact-grid">
                        <div class="contact-card">
                            <div class="contact-icon">
                                <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.9;">
                                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                                </svg>
                            </div>
                            <div class="contact-info">
                                <div class="contact-label">Email</div>
                                <a href="mailto:{{basics.email}}" class="contact-link">{{basics.email}}</a>
                            </div>
                        </div>

                        <div class="contact-card">
                            <div class="contact-icon">
                                <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.9;">
                                    <path d="M6.62 10.79c1.44 2.83 3.76 5.15 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                                </svg>
                            </div>
                            <div class="contact-info">
                                <div class="contact-label">Phone</div>
                                <a href="tel:{{basics.phone}}" class="contact-link">{{basics.phone}}</a>
                            </div>
                        </div>

                        {{#each basics.profiles}}
                        {{#if (eq network "Calendly")}}
                        <div class="contact-card">
                            <div class="contact-icon">
                                <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.9;">
                                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                                </svg>
                            </div>
                            <div class="contact-info">
                                <div class="contact-label">Schedule Meeting</div>
                                <a href="{{url}}" class="contact-link" target="_blank" rel="noopener noreferrer">Book a Meeting</a>
                            </div>
                        </div>
                        {{/if}}
                        {{/each}}
                    </div>

                    <!-- Social links and resume actions -->
                    <div class="contact-actions">
                        <div class="social-links">
                            {{#each basics.profiles}}
                            {{#unless (eq network "Calendly")}}
                            <a href="{{url}}" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="{{network}} profile">
                                {{#if (eq network "LinkedIn")}}
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                </svg>
                                <span>LinkedIn</span>
                                {{/if}}
                                {{#if (eq network "GitHub")}}
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                <span>GitHub</span>
                                {{/if}}
                                {{#if (eq network "WhatsApp")}}
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"/>
                                </svg>
                                <span>WhatsApp</span>
                                {{/if}}
                            </a>
                            {{/unless}}
                            {{/each}}
                        </div>

                        <!-- Resume download and share actions -->
                        <div class="resume-actions no-print">
                            <a href="./resume.pdf" class="action-btn primary-btn" download="Rafael_Sathler_Resume.pdf" aria-label="Download PDF resume">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                </svg>
                                <span>Download PDF</span>
                            </a>
                            <button class="action-btn secondary-btn" id="share-qr-btn" aria-label="Share resume QR code">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92S19.61 16.08 18 16.08z"/>
                                </svg>
                                <span>Share</span>
                            </button>
                        </div>
                    </div>
                </section>

                <section class="section fade-in-section" id="experience-section">
                    <div class="section-header">
                        <h2>Experience</h2>
                    </div>

                    <div id="work-container">
                        {{#each work}}
                        <div class="work-item" data-index="{{@index}}">
                            <div class="work-header">
                                <div>
                                    <div class="work-title">{{position}}</div>
                                    <div class="company">{{name}}</div>
                                </div>
                                <div class="work-date">
                                    <span class="date-range">
                                        <span class="date-start">{{startDate}}</span>
                                        <span class="date-separator">—</span>
                                        <span class="date-end">{{#if endDate}}{{endDate}}{{else}}Present{{/if}}</span>
                                    </span>
                                </div>
                            </div>
                            <div class="work-summary">{{summary}}</div>
                            <ul class="highlights">
                                {{#each highlights}}
                                <li tabindex="0" role="button" aria-label="Achievement: {{this}}">{{this}}</li>
                                {{/each}}
                            </ul>
                        </div>
                        {{/each}}
                    </div>

                    <div class="load-more-container" id="load-more-container">
                        <button class="load-more-btn" id="load-more-btn" aria-label="Load more work experience entries">
                            <span class="btn-icon">📋</span>
                            <span class="btn-text">Load Earlier Experience</span>
                            <span class="btn-status">Showing <span id="shown-count">3</span> of <span id="total-count">{{work.length}}</span></span>
                        </button>
                    </div>
                </section>

                {{#if projects}}
                <section class="section fade-in-section">
                    <h2>Key Projects</h2>
                    <div class="projects-container">
                        {{#each projects}}
                        <div class="work-item project-item" data-project-index="{{@index}}">
                            <div class="work-header">
                                <div>
                                    <div class="work-title">{{name}}</div>
                                    {{#if url}}<div class="company"><a href="{{url}}" target="_blank" rel="noopener noreferrer" style="color: inherit;">{{url}}</a></div>{{/if}}
                                </div>
                            </div>
                            <div class="work-summary">{{description}}</div>
                            <ul class="highlights">
                                {{#each highlights}}
                                <li tabindex="0" role="button" aria-label="Achievement: {{this}}">{{this}}</li>
                                {{/each}}
                            </ul>
                            {{#if keywords}}
                            <div style="margin-top: 0.5rem;">
                                {{#each keywords}}
                                <span class="skill-tag" style="margin-right: 0.3rem; margin-bottom: 0.3rem; display: inline-block;">{{this}}</span>
                                {{/each}}
                            </div>
                            {{/if}}
                        </div>
                        {{/each}}
                    </div>

                    <div class="load-more-container" id="load-more-projects-container">
                        <button class="load-more-btn" id="load-more-projects-btn" aria-label="Load more project entries">
                            <span class="btn-icon">💼</span>
                            <span class="btn-text">Load More Projects</span>
                            <span class="btn-count">+<span id="projects-remaining-count"></span> more projects</span>
                        </button>
                    </div>
                </section>
                {{/if}}

                <section class="section fade-in-section">
                    <h2>Education</h2>
                    <div class="education-counter no-print">Showing <span id="education-visible-count">1</span> of {{education.length}} entries</div>
                    {{#each education}}
                    <div class="education-item" data-education-index="{{@index}}">
                        <div class="work-header">
                            <div>
                                <div class="work-title">{{studyType}} in {{area}}</div>
                                <div class="company">{{institution}}</div>
                            </div>
                            <div class="work-date">
                                <div class="date-range">
                                    <span class="start-date">{{startDate}}</span>
                                    <span class="date-separator">—</span>
                                    <span class="end-date">{{endDate}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                    <div id="load-more-education-container" class="load-more-container no-print" style="display: none;">
                        <button id="load-more-education-btn" class="load-more-btn" aria-label="Load more education entries">
                            <span class="load-more-text">Load Earlier Education</span>
                            <span class="load-more-icon">+</span>
                        </button>
                    </div>
                </section>
            </div>

            <div class="right-column">
                <section class="section fade-in-section">
                    <h2>Skills</h2>
                    <div class="skills-counter no-print" id="skills-counter">Showing <span id="skills-visible-count">{{skills.length}}</span> of {{skills.length}} categories</div>
                    {{#each skills}}
                    <div class="skill-category skill-category-item" data-skill-index="{{@index}}">
                        <div class="skill-name">
                            {{name}}

                        </div>
                        <div class="skill-keywords">
                            {{#each keywords}}
                            {{#if (lookup ../links this)}}
                            <a href="{{lookup ../links this}}" target="_blank" rel="noopener noreferrer" class="skill-tag skill-link" tabindex="0" title="Learn more about {{this}}">{{this}}</a>
                            {{else}}
                            <span class="skill-tag" tabindex="0" role="button" aria-label="Skill: {{this}}">{{this}}</span>
                            {{/if}}
                            {{/each}}
                        </div>
                    </div>
                    {{/each}}
                    <div id="load-more-skills-container" class="load-more-container no-print" style="display: none;">
                        <button id="load-more-skills-btn" class="load-more-btn" aria-label="Load more skills and expertise">
                            <span class="load-more-text">Show More Skills</span>
                            <span class="load-more-icon">+</span>
                        </button>
                    </div>
                </section>

                {{#if basics.nationality}}
                <section class="section fade-in-section">
                    <h2>Personal Details</h2>
                    <div class="skill-category">
                        <div class="skill-name">Nationality</div>
                        <div class="skill-keywords">
                            <span class="skill-tag" tabindex="0" role="button" aria-label="Nationality: {{basics.nationality}}">{{basics.nationality}}</span>
                        </div>
                    </div>
                    {{#if basics.languages}}
                    <div class="skill-category">
                        <div class="skill-name">Languages</div>
                        <div class="skill-keywords">
                            {{#each basics.languages}}
                            <span class="skill-tag" tabindex="0" role="button" aria-label="Language: {{this}}">{{this}}</span>
                            {{/each}}
                        </div>
                    </div>
                    {{/if}}
                </section>
                {{/if}}

                {{#if certificates}}
                <section class="section fade-in-section">
                    <h2>Certificates</h2>
                    {{#each certificates}}
                    <div class="certificate-item">
                        <div class="cert-name">{{name}}</div>
                        <div class="cert-issuer">{{issuer}}</div>
                        <div class="cert-date">{{date}}{{#if endDate}} — {{endDate}}{{/if}}</div>
                    </div>
                    {{/each}}
                </section>
                {{/if}}
            </div>
        </div>

        <!-- QR Code Section - Only visible in print -->
        <div class="print-qr-section">
            <canvas id="print-qr-code" class="print-qr-code" width="100" height="100"></canvas>
            <p class="print-qr-text">
                <strong>View online version:</strong><br>
                rafilkmp3.github.io/resume-as-code
            </p>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-main">Developed with ❤️ in Rio de Janeiro</div>
                <div class="footer-version">
                    <span class="app-info">
                        <a href="https://github.com/rafilkmp3/resume-as-code/releases/tag/v1.3.0"
                           id="version-link"
                           target="_blank"
                           rel="noopener noreferrer"
                           class="version-link no-print">
                            v<span id="app-version">{{appVersion}}</span>
                        </a> • <span id="app-environment">production</span> •
                        <a href="#"
                           id="commit-link"
                           target="_blank"
                           rel="noopener noreferrer"
                           class="commit-link no-print"
                           title="View this commit on GitHub">
                            <span id="app-commit">dev-local</span>
                        </a>
                    </span>
                    <span class="build-info no-print">Built with <strong><a href="https://github.com/rafilkmp3/resume-as-code" target="_blank" rel="noopener noreferrer" class="resume-code-link">Resume-as-Code</a></strong></span>
                </div>
            </div>
        </footer>
    </div>

    <!-- QR Code Modal -->
    <div id="qr-modal" class="qr-modal">
        <div class="qr-modal-content">
            <div class="qr-modal-header">
                <h3>Share Resume</h3>
                <button id="qr-modal-close" class="qr-modal-close" aria-label="Close QR code modal">×</button>
            </div>
            <div class="qr-modal-body">
                <canvas id="qr-code-image" class="qr-code-large" width="200" height="200"></canvas>
                <div class="qr-code-url">{{basics.url}}</div>
                <p class="qr-code-description">Scan to access resume online or share this URL</p>
            </div>
            <div class="qr-modal-footer">
                <button id="qr-copy-btn" class="qr-copy-btn">
                    📋 Copy URL
                </button>
                <button id="qr-download-btn" class="qr-download-btn">
                    💾 Download QR
                </button>
            </div>
        </div>
    </div>

    <script id="resume-data" type="application/json">
        {{{json this}}}
    </script>
</body>
</html>
